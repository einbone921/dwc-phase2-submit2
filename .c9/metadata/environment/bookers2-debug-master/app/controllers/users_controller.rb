{"changed":true,"filter":false,"title":"users_controller.rb","tooltip":"/bookers2-debug-master/app/controllers/users_controller.rb","value":"class UsersController < ApplicationController\n  before_action :ensure_correct_user, only: [:update]\n\n  def show\n    @user = User.find(params[:id])\n    @books = @user.books\n    @book = Book.new\n  end\n\n  def index\n    @users = User.all\n    @book = Book.new\n  end\n\n  def edit\n    @user = User.find(params[:id])\n  end\n\n  def update\n    if @user.update(user_params)\n      redirect_to users_path(@user), notice: \"You have updated user successfully.\"\n    else\n      render \"show\"\n    end\n  end\n\n  private\n  def user_params\n    params.require(:user).permit(:name, :introduction, :profile_image)\n  end\n\n  def ensure_correct_user\n    @user = User.find(params[:id])\n    unless @user == current_user\n      redirect_to user_path(current_user)\n    end\n  end\nend\n","undoManager":{"mark":2,"position":2,"stack":[[{"start":{"row":11,"column":20},"end":{"row":12,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":12,"column":0},"end":{"row":12,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":12,"column":2},"end":{"row":12,"column":4},"action":"remove","lines":["  "],"id":3}],[{"start":{"row":12,"column":2},"end":{"row":12,"column":3},"action":"insert","lines":["e"],"id":4},{"start":{"row":12,"column":3},"end":{"row":12,"column":4},"action":"insert","lines":["n"]},{"start":{"row":12,"column":4},"end":{"row":12,"column":5},"action":"insert","lines":["d"]}],[{"start":{"row":37,"column":0},"end":{"row":39,"column":0},"action":"remove","lines":["","",""],"id":11}],[{"start":{"row":38,"column":0},"end":{"row":38,"column":2},"action":"remove","lines":["  "],"id":11}],[{"start":{"row":32,"column":0},"end":{"row":33,"column":0},"action":"remove","lines":["",""],"id":12}],[{"start":{"row":26,"column":2},"end":{"row":31,"column":5},"action":"insert","lines":["def ensure_correct_user","    @user = User.find(params[:id])","    unless @user == current_user","      redirect_to user_path(current_user)","    end","  end"],"id":13}],[{"start":{"row":26,"column":0},"end":{"row":26,"column":2},"action":"insert","lines":["  "],"id":14}],[{"start":{"row":25,"column":0},"end":{"row":26,"column":0},"action":"insert","lines":["",""],"id":15},{"start":{"row":26,"column":0},"end":{"row":27,"column":0},"action":"insert","lines":["",""]},{"start":{"row":27,"column":0},"end":{"row":28,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":31,"column":2},"end":{"row":36,"column":5},"action":"remove","lines":["def ensure_correct_user","    @user = User.find(params[:id])","    unless @user == current_user","      redirect_to user_path(current_user)","    end","  end"],"id":16}]]},"ace":{"folds":[],"scrolltop":322,"scrollleft":0,"selection":{"start":{"row":31,"column":2},"end":{"row":36,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1606812749385}